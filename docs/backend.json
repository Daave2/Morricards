
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the MorriCards application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user (matches Firebase Auth UID)."
        },
        "email": {
          "type": "string",
          "description": "The email address of the user.",
          "format": "email"
        }
      },
      "required": [
        "id",
        "email"
      ]
    },
    "PickingOrder": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "PickingOrder",
      "type": "object",
      "description": "A customer's order to be picked from the store.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the picking order (e.g., from the external system)."
        },
        "customerName": {
          "type": "string",
          "description": "The name of the customer."
        },
        "collectionSlot": {
          "type": "string",
          "description": "The date and time slot for collection."
        },
        "phoneNumber": {
          "type": "string",
          "description": "Customer's phone number."
        },
        "products": {
          "type": "array",
          "description": "List of products required for the order.",
          "items": {
            "$ref": "#/entities/OrderProduct"
          }
        },
        "isPicked": {
          "type": "boolean",
          "description": "True if the entire order has been picked."
        },
        "isArchived": {
          "type": "boolean",
          "description": "True if the user has archived the order."
        }
      },
      "required": ["id", "customerName", "collectionSlot", "products", "isPicked", "isArchived"]
    },
    "OrderProduct": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "OrderProduct",
      "type": "object",
      "description": "A product within a picking order, including its picked status.",
      "properties": {
        "sku": {
          "type": "string",
          "description": "The product SKU."
        },
        "name": {
          "type": "string",
          "description": "The product name at the time of order import."
        },
        "quantity": {
          "type": "number",
          "description": "The quantity of this product required for the order."
        },
        "pickedItems": {
          "type": "array",
          "description": "A list of items picked against this product line, including substitutes.",
          "items": {
            "$ref": "#/entities/PickedItem"
          }
        },
        "details": {
          "type": "object",
          "description": "Full, rich product details from the Morrisons API, stored at pick time."
        }
      },
      "required": ["sku", "name", "quantity", "pickedItems"]
    },
    "PickedItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "PickedItem",
      "type": "object",
      "description": "Represents a single item picked, which could be the original or a substitute.",
      "properties": {
        "sku": {
          "type": "string",
          "description": "The SKU of the item that was physically picked. Special value 'MISSING' if not found."
        },
        "isSubstitute": {
          "type": "boolean",
          "description": "True if this item is a substitute for the original product."
        },
        "details": {
          "type": "object",
          "description": "Product details of the picked item, especially if it is a substitute."
        }
      },
      "required": ["sku", "isSubstitute"]
    }
  },
  "auth": {
    "providers": [
      "anonymous"
    ]
  },
  "firestore": {
    "/stores/{locationId}/pickingOrders/{orderId}": {
      "schema": {
        "$ref": "#/entities/PickingOrder"
      },
      "description": "Stores all picking orders for a given store location, shared by all users of that store."
    }
  }
}
